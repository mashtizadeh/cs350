%% -*- LaTeX -*-

% Palatino should be set in PPRsimple.sty
%\usepackage{palatino}
%\usepackage[sc]{mathpazo}
%\usepackage{color}
\usepackage{pstricks,pst-node}
\usepackage{tabularx}
%\usepackage[noeka]{mathrmletter}
\usepackage{fancyvrb}

% Weird bug workaround
\usepackage{layouts}

%%\usepackage{alltt}
%%\usepackage{fancybox}
%%\usepackage{euler}
%%\usepackage{epsf}
%%\usepackage{epsfig}
%%\usepackage{fancybox}

%\usepackage{tikz} % use if you use dia tex (as opposed to pdf) output

% These are mostly redundant with PPRsimple.sty, but cmtt is important
%\renewcommand{\rmdefault}{ppl}
%\renewcommand{\sfdefault}{phv}
%\renewcommand{\ttdefault}{cmtt}

%
% PPRsimple.sty must also ensure that the title is rendered with
%   \fontsize{20.74pt}{18pt}\selectfont
%
% and the text with
%   \fontsize{12.4pt}{14pt}\selectfont
%

%
% This string gets extracted as the name of the link for index.html on
% the lecture notes page.  It is an error not to call topic.
%
\makeatletter
\newcommand{\topic}[1]{%
\def\my@topic{#1}\immediate\write16{Lecture Topic: \my@topic}}
\makeatother

%\hypersetup{pdfpagemode=FullScreen}
%\renewcommand{\PDFtransition}[1]{%
%   \hypersetup{pdfpagetransition={#1}}}
%\DefaultTransition{Random}
\hypersetup{colorlinks=true}

%
% Might be required for size to come out right with seminar:
%
%\newif\ifpdf
%\ifx\pdfoutput\undefined
%   \pdffalse
%\else
%   \pdfoutput=1
%   \pdftrue
%\fi  
%
%\ifpdf
%  \usepackage[pdftex]{graphicx}
%  \pdfcompresslevel=9
%  \pdfpagewidth=11truein %297truemm % your milage may vary....
%  \pdfpageheight=8.5truein %210truemm
%  \pdfhorigin=1truein     % default value(?), but doesn't work without
%  \pdfvorigin=1truein     % default value(?), but doesn't work without
%\else
%  \usepackage{graphicx}
%\fi
%
%\slideframe{none}
%\def\theslide{}

%
% Handy macros for prosper
%
\newcommand*{\widen}[1]{\advance\slideWidth by #1\relax}

%
% SHA-1 that shrinks appropriately in math mode (unlike \mbox{SHA-1})
%
\newcommand{\hyph}{{\mathrm{{\mathchar"002D}}}}
\newcommand{\sha}{{\mathrm{SHA{\mathchar"002D}1}}}

%
% Some symbols
%
\def\sqbullet{\vrule depth -.2ex height 1.2ex width 1ex\relax}

%
% Some colors
%
\newcommand{\Red}[1]{\mbox{}{\color[rgb]{1,0,0}#1}}
\newcommand{\Blue}[1]{\mbox{}{\color[rgb]{0,0,1}#1}}
\newcommand{\LtGreen}[1]{\mbox{}{\color[rgb]{0,1,0}#1}}
\newcommand{\Green}[1]{\mbox{}{\color[rgb]{0,.8,0}#1}}
\newcommand{\Black}[1]{\mbox{}{\color[rgb]{0,0,0}#1}}
\newcommand{\Maroon}[1]{\mbox{}{\color[rgb]{.79,.19,.38}#1}}
\newcommand{\Purple}[1]{\mbox{}{\color[rgb]{.5,0,1}#1}}
%\newcommand{\Orange}[1]{\mbox{}{\color[rgb]{1,.65,0}#1}}
\newcommand{\Orange}[1]{\mbox{}{\color[rgb]{.9,.55,0}#1}}
\newcommand{\Magenta}[1]{\mbox{}{\color[rgb]{1,0,1}#1}}
\newcommand{\Grey}[1]{\mbox{}{\color[rgb]{.7,.7,.7}#1}}

%
% For some reason overlays inside items are now busted, even though
% they used to work.  This is a more bogus way of doing them... just
% turn everything white
%
\makeatletter
\long\def\@on@overlay@one#1{\begingroup%
\color[rgb]{1,1,1}\def\color[##1]##2{}#1\endgroup}
\makeatother

%
% Some verbatim environments
%
\makeatletter
\begingroup \catcode `|=0 \catcode `[= 1
\catcode`]=2 \catcode `\{=12 \catcode `\}=12
\catcode`\\=12 |gdef|@xmyverb#1\end{myverb}[#1|end[myverb]]
|endgroup
\def\myverb{\begingroup\scriptsize\openup-1\jot%
\@verbatim \frenchspacing\@vobeyspaces \@xmyverb}
\def\endmyverb{\if@newlist \leavevmode\fi\endtrivlist\endgroup}
\makeatother

%
% Listings with ` and ' as escape codes
%
\definecolor{comment}{rgb}{0,0,1}
\usepackage{listings}
\lstnewenvironment{code}%
    {\vspace*{-1\baselineskip}\lstset{language=C,escapeinside=`',%
            columns=flexible,%
            commentstyle=\color{comment},%
            basicstyle=\ttfamily\openup-1\jot}}%
    {}
\lstnewenvironment{smallcode}%
    {\vspace*{-1\baselineskip}\lstset{language=C,escapeinside=`',%
            columns=flexible,%
            commentstyle=\color{comment},%
            basicstyle=\ttfamily\scriptsize\openup-1\jot%
    }}%
    {}

%
% And the \itms and \ittms macros for bulleted lists
%
\newcommand{\slname}{}
\newcommand{\itms}[1]{
{\bfseries
\begin{itemize}
#1   
\end{itemize}
}}
\newcommand{\ittms}[1]{
{\scriptsize\mdseries
\begin{itemize}
#1   
\end{itemize}
}}
\let\itttms\ittms
\newcommand{\itmpar}[1]{\par\hangindent=3pc\hangafter=1{\bf #1}}

%
% Extension codes
%
\makeatletter
\newcommand{\extensioncode}{{%
\@ifundefined{theextensioncode}{\input{extensioncode}}{}%
\setbox0=\hbox{\texttt{\theextensioncode{}}}%
\@ifundefined{exposeextensioncode}%
    {\hbox to\wd0{\cleaders\vrule height \ht0 depth \dp0\hfill}}%
    {\unhbox0}%
}}
\makeatother

%
% Class-specific stuff
%
\title{CS350 -- Operating Systems}
\author{Instructor: Ali Mashtizadeh}
\institution{University of Waterloo}
\newcommand{\cref}[2]{\href{https://rcs.uwaterloo.ca/~ali/cs350/#1}{#2}}

\slideCaption{}
\AtEndDocument{\expandafter\ifx\csname my@topic\endcsname\relax%
% This error happens if you don't call \topic
\ErrorMustCallTopic\fi}
